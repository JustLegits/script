--[[ local player   = game:GetService("Players").LocalPlayer
local pg       = player:WaitForChild("PlayerGui")
local itemsGui = pg:WaitForChild("Items")        -- đợi UI tên Items xuất hiện

-- Toggle trạng thái Enabled
itemsGui.Enabled = not itemsGui.Enabled
]]--

-- LocalScript: Dropdown UI to select and toggle named ScreenGui under PlayerGui

local Players = game:GetService("Players")
local player  = Players.LocalPlayer
local pg      = player:WaitForChild("PlayerGui")

-- Configuration
local options       = {"Items", "Merchant", "BossAttack", "Collection", "Crafting", "Quest", "UnitsGacha"}
local optionHeight  = 30
local dropdownH     = 40
local optionsH      = #options * optionHeight
local frameW, frameH = 300, 50 + optionsH + 60

-- Create controller UI
local controllerGui = Instance.new("ScreenGui")
controllerGui.Name          = "UIController"
controllerGui.ResetOnSpawn  = false
controllerGui.Parent        = pg

local frame = Instance.new("Frame", controllerGui)
frame.Size             = UDim2.new(0, frameW, 0, frameH)
frame.Position         = UDim2.new(0.5, -frameW/2, 0.5, -frameH/2)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.BorderSizePixel  = 0
frame.AnchorPoint      = Vector2.new(0.5, 0.5)

-- Dropdown button
local dropdownBtn = Instance.new("TextButton", frame)
dropdownBtn.Size             = UDim2.new(1, -20, 0, dropdownH)
dropdownBtn.Position         = UDim2.new(0, 10, 0, 10)
dropdownBtn.Text             = options[1]
dropdownBtn.Font             = Enum.Font.SourceSans
dropdownBtn.TextSize         = 24
dropdownBtn.TextColor3       = Color3.new(1,1,1)
dropdownBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
dropdownBtn.BorderSizePixel  = 0

-- Options list (initially hidden)
local optsFrame = Instance.new("Frame", frame)
optsFrame.Size             = UDim2.new(1, -20, 0, optionsH)
optsFrame.Position         = UDim2.new(0, 10, 0, 10 + dropdownH)
optsFrame.BackgroundColor3 = Color3.fromRGB(50,50,50)
optsFrame.BorderSizePixel  = 0
optsFrame.Visible          = false
optsFrame.ClipsDescendants = true

for i, name in ipairs(options) do
    local btn = Instance.new("TextButton", optsFrame)
    btn.Size             = UDim2.new(1, 0, 0, optionHeight)
    btn.Position         = UDim2.new(0, 0, 0, (i-1) * optionHeight)
    btn.Text             = name
    btn.Font             = Enum.Font.SourceSans
    btn.TextSize         = 20
    btn.TextColor3       = Color3.new(1,1,1)
    btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
    btn.BorderSizePixel  = 0
    btn.MouseButton1Click:Connect(function()
        dropdownBtn.Text = name
        optsFrame.Visible = false
    end)
end

dropdownBtn.MouseButton1Click:Connect(function()
    optsFrame.Visible = not optsFrame.Visible
end)

-- Open & Close buttons
local btnY = 10 + dropdownH + optionsH + 10
local openBtn = Instance.new("TextButton", frame)
openBtn.Size             = UDim2.new(0.5, -15, 0, 40)
openBtn.Position         = UDim2.new(0, 10, 0, btnY)
openBtn.Text             = "Open"
openBtn.Font             = Enum.Font.SourceSans
openBtn.TextSize         = 22
openBtn.TextColor3       = Color3.new(1,1,1)
openBtn.BackgroundColor3 = Color3.fromRGB(0,120,215)
openBtn.BorderSizePixel  = 0

local closeBtn = Instance.new("TextButton", frame)
closeBtn.Size             = UDim2.new(0.5, -15, 0, 40)
closeBtn.Position         = UDim2.new(0.5, 5, 0, btnY)
closeBtn.Text             = "Close"
closeBtn.Font             = Enum.Font.SourceSans
closeBtn.TextSize         = 22
closeBtn.TextColor3       = Color3.new(1,1,1)
closeBtn.BackgroundColor3 = Color3.fromRGB(180,40,40)
closeBtn.BorderSizePixel  = 0

-- Toggle function
local function setGuiEnabled(name, enabled)
    local gui = pg:FindFirstChild(name)
    if gui and gui:IsA("ScreenGui") then
        gui.Enabled = enabled
    else
        warn("Không tìm thấy ScreenGui tên “".. name .."” trong PlayerGui")
    end
end

openBtn.MouseButton1Click:Connect(function()
    setGuiEnabled(dropdownBtn.Text, true)
end)
closeBtn.MouseButton1Click:Connect(function()
    setGuiEnabled(dropdownBtn.Text, false)
end)
